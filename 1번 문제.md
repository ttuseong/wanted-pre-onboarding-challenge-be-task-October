
# 동시에 같은 `DB Table row` 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.

SQL을 호출할 때는 SP 형식으로 진행을 했는데 SP 설정에 타임아웃 시간을 따로 설정하여 사용했고, sp 내용에서 try catch를 넣어 문제가 있을 경우 resultCode 값을 -9999로 저장하고, 발생한 원인을 resultMsg에 저장했습니다.

SP 마지막에 resultCode가 0인 경우 커밋을 하고 아닌 경우 롤백을 하도록 했습니다. sp실행 후 resultCode가 0이 아닌 경우 resultMsg를 다시 파일로그로 남겼고, 프론트로 resultCode값을 전달합니다. 

프론트에서는 resultCode를 통해 0이 아닌 경우 "잠시 후 다시 시도해 주세요"라는 메시지 보여주어 다시 시도하도록 했습니다.

만약 동일한 table row를 수정하려 할 경우 데드락으로 인한 타임아웃이 발생하여 위에 로직이 실행되었을 것으로 예상합니다.